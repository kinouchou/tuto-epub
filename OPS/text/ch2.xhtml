<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:epub="http://www.idpf.org/2007/ops"
      lang="fr" xml:lang="fr">
  <head>
    <title>Les bases d'un epub</title>
    <link rel="stylesheet" type="text/css" href="../styles/framabook.css" />
  </head>

  <body epub:type="bodymatter chapter">
    <h2 class="titre-chapitre">
      <span class="numero-chapitre"> Chapitre 2 </span>
      Les bases d’un EPUB
    </h2>

    <nav id="TOC" class="epub-toc" epub:type="bodymatter toc">
      <ul>
        <li><a href="#ch2-01">Les différents fichiers obligatoires à un EPUB</a></li>
        <li><a href="#addenda-au-chapitre-2">Addenda au chapitre 2 — Modèle d'addenda chère à Pouhiou</a></li>
      </ul>
    </nav>

    <p>Un EPUB est un ensemble de fichiers (la plupart en <abbr>HTML</abbr>) compressés et ayant une extension .epub. Il est plus simple de faire un dossier par EPUB, de mettre dans ce dossier les fichiers et dossiers obligatoires. S’il y a besoin de fichiers intéressants pour le projets mais n’entrant pas dans l’EPUB final il vaut mieux les mettre dans un dossier à la racine de l’EPUB et de bien faire attention lors de la compression du dossier final pour ne pas inclure ce dossier annexe.</p>

    <section id="ch2-01" epub:type="bodymatter subchapter">
      <h3>Les différents fichiers obligatoires à un EPUB</h3>

      <h4>fichier mimetype</h4>
      <p>Il contient une seule ligne :
      <code>application/epub+zip</code></p>
      <p>Il doit toujours être à la racine du dossier.</p>

      <h4>dossier META-INF : les méta-données</h4>
      <h5>container.xml</h5>
      <a href="http://www.idpf.org/epub/30/spec/epub30-ocf.html#sec-container-metainf-container.xml">spec</a>
<pre>&lt;?xml version="1.0"?&gt;
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
  &lt;rootfiles&gt;
    &lt;rootfile full-path="OPS/content.opf" media-type="application/oebps-package+xml"/&gt;
  &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
      <p>Bien faire attention en mettant le chemin complet de <code>content.opf</code></p>

      <h4>dossier OPS : le contenu</h4>
      <h5>fichier content.opf</h5>
      <p><a href="http://idpf.org/epub/30/spec/epub30-publications.html#sec-package-elem">Spécifications de l’<abbr>idpf</abbr></a></p>
      <h6>l’entête</h6>
      <pre>&lt;?xml version="1.0" encoding="utf-8" standalone="no"?&gt;</pre>
      <p><code>standalone="no"</code> signifie que le fichier n'est pas autonome, c'est pas nécessaire de le noter car c'est sa valeur par défaut.</p>
      <h6>package</h6>
      <pre>&lt;package xmlns="http://www.idpf.org/2007/opf"
      xmlns:dc="http://purl.org/dc/elements/1.1/"
      xmlns:dcterms="http://purl.org/dc/terms/"
      version="3.0" xml:lang="en"
      unique-identifier="pub-identifier"&gt;</pre>
      <p>Attention c'est ici qu'on dit la version de l'EPUB, bien indiquer la langue aussi. Pour la partie sur l'<a href="http://idpf.org/epub/30/spec/epub30-publications.html#sec-opf-metadata-identifiers-pid">unique-identifier</a> j'ai encore des soucis pour comprendre comment on le crée. Les <code>xmlns="…"</code> sont très importants, ils permettent de dire quel « dictionnaire » de termes on utilise. C’est utile pour indiquer les différentes sections de l’EPUB.</p>
      <h6>metadata</h6>
<pre>&lt;metadata&gt;
  &lt;dc:identifier id="pub-identifier"&gt;urn:isbn:numéro_isbn&lt;/dc:identifier&gt;
  &lt;dc:title id="pub-title"&gt;titre&lt;/dc:title&gt;
  &lt;dc:language id="pub-language"&gt;langue&lt;/dc:language&gt;
  &lt;dc:date&gt;date&lt;/dc:date&gt;
  &lt;meta property="dcterms:modified"&gt;… &lt;/meta&gt;
  &lt;dc:creator id="pub-creator12"&gt;auteur&lt;/dc:creator&gt;
  &lt;dc:contributor&gt;contributeur&lt;/dc:contributor&gt;
  &lt;dc:publisher&gt;éditeur&lt;/dc:publisher&gt;
  &lt;dc:rights&gt;la licence&lt;/dc:rights&gt;
&lt;/metadata&gt;</pre>
      <p>Il peut y avoir moins de <code>metadata</code> ou plus, les specs sont assez claires (pour une fois). Pour le <code>modified</code> c’est la date et l’heure sous la forme <code>yyyy-mm-jjThh:mm:ssZ</code></p>
      <h5>fichier toc.ncx</h5>
      <h5>au moins un fichier .html ou .xhtml</h5>
      <p>Exemple de note de bas de page<a epub:type="noteref" href="#note_ch2-1" id="ref_ch2-1"> [1]</a></p>
    </section>

    <section id="addenda-au-chapitre-2" epub:type="bodymatter afterword">
      <h3><a href="#TOC">Addenda au chapitre 2 <span class="titre">Modèle d'addenda cher à Pouhiou</span></a></h3>
      <div class="addendum">
        <p>Contenu de l'addendum.</p>
      </div>
    </section>

    <aside class="epub-footnotes" epub:type="footnotes">
      <ol epub:type="footnote">
        <li><a epub:type="footnote" href="#ref_ch2-1" id="note_ch2-1">1.</a> Contenu de la note de bas de page. Pour indiquer la référence bien mettre une espace insécable avant les crochets entourant le numéro de la référence. Ça permet d'avoir une zone plus grande pour sélectionner le lien notamment sur liseuse où la sélection se fait avec un doigt. </li>
      </ol>
    </aside>
  </body>
</html>

